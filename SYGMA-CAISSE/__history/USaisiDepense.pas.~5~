unit USaisiDepense;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.ComCtrls, Vcl.ExtCtrls;

type
  TfrmSaisiDepense = class(TForm)
    Bevel1: TBevel;
    Label1: TLabel;
    Label2: TLabel;
    Label3: TLabel;
    Label5: TLabel;
    Label4: TLabel;
    DateDep: TDateTimePicker;
    edPiece: TEdit;
    cbCaisse: TComboBox;
    edMontant: TEdit;
    mLibelle: TMemo;
    Button1: TButton;
    Button2: TButton;
    procedure FormActivate(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure FormShow(Sender: TObject);
  private
    { Déclarations privées }
  public
    { Déclarations publiques }
  end;

var
  frmSaisiDepense: TfrmSaisiDepense;

implementation

{$R *.dfm}

uses records, UDM, UConnexion;

procedure TfrmSaisiDepense.FormActivate(Sender: TObject);
var
  PsqlCaisse : string;
  user : TUser;
begin

//**********************Selection de la caisse de l'utilisateur*********

  PsqlCaisse := ' where usager = '+QuotedStr(vUsager);
  user := dm.selectUser(PsqlCaisse);
  cbCaisse.Text := user.Snum_caisse;

end;

procedure TfrmSaisiDepense.FormCreate(Sender: TObject);
begin
  mLibelle.Clear;

end;

procedure TfrmSaisiDepense.FormShow(Sender: TObject);
var
  PsqlCaisse : string;
  user : TUser;
begin

//**********************Selection de la caisse de l'utilisateur*********
  DateDep.Date := Now;

  PsqlCaisse := ' where usager = '+QuotedStr(vUsager);
  user := dm.selectUser(PsqlCaisse);
  cbCaisse.Text := user.Snum_caisse;
end;

end.
